/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.robokids.robooffice.desktop.tabs.humanresources;

import ca.robokids.exception.BadFieldException;
import ca.robokids.exception.DatabaseException;
import ca.robokids.robooffice.desktop.loaders.FontsLoader;
import ca.robokids.robooffice.desktop.main.TabManager;
import ca.robokids.robooffice.desktop.tabs.Tab;
import ca.robokids.robooffice.desktop.util.PopupMessage;
import ca.robokids.robooffice.entity.user.PasswordQuestion;
import ca.robokids.robooffice.entity.user.User;
import ca.robokids.robooffice.entity.user.UserGroup;
import ca.robokids.robooffice.logic.usermanagement.UserManager;
import de.javasoft.swing.JYCheckBoxList.CheckBoxSelectionModel;
import java.util.ArrayList;
import java.util.List;
import javax.swing.DefaultComboBoxModel;
import javax.swing.DefaultListModel;

/**
 *
 * @author Coldsoft
 */
public class AddStaffTab extends javax.swing.JPanel implements Tab {

   List<UserGroup> groups = null;
   CheckBoxSelectionModel checkboxModel;
   DefaultListModel<UserGroup> model = new DefaultListModel();
   DefaultComboBoxModel<PasswordQuestion> cboModel = new DefaultComboBoxModel();

   public AddStaffTab() {
      initComponents();
      initialize();
      refresh();




   }

   /**
    * This method is called from within the constructor to initialize the form.
    * WARNING: Do NOT modify this code. The content of this method is always
    * regenerated by the Form Editor.
    */
   @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        centre = new javax.swing.JPanel();
        pnlPersonal = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        pnlPhone = new ca.robokids.robooffice.desktop.tabs.components.PhoneNumberPanel();
        txtFirstname = new javax.swing.JTextField();
        txtLastname = new javax.swing.JTextField();
        txtEmail = new javax.swing.JTextField();
        txtAddress = new javax.swing.JTextField();
        txtSIN = new ca.robokids.robooffice.desktop.tabs.components.IntegerNumberJTextField();
        pnlUserAccount = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        txtUsername = new javax.swing.JTextField();
        txtPass1 = new javax.swing.JPasswordField();
        txtPass2 = new javax.swing.JPasswordField();
        jScrollPane1 = new javax.swing.JScrollPane();
        listGroups = new de.javasoft.swing.JYCheckBoxList();
        jLabel10 = new javax.swing.JLabel();
        cboQuestion = new javax.swing.JComboBox();
        jLabel11 = new javax.swing.JLabel();
        txtAnswer = new javax.swing.JTextField();
        btnAddStaff = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        lblErrorMsg = new javax.swing.JLabel();

        setLayout(new java.awt.GridBagLayout());

        pnlPersonal.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Personal Information", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, FontsLoader.getTitleBorderFont()));

        jLabel1.setFont(FontsLoader.getStaticLabelFont());
        jLabel1.setText("First Name");

        jLabel2.setFont(FontsLoader.getStaticLabelFont());
        jLabel2.setText("Last Name");

        jLabel3.setFont(FontsLoader.getStaticLabelFont());
        jLabel3.setText("Email");

        jLabel4.setFont(FontsLoader.getStaticLabelFont());
        jLabel4.setText("Address");

        jLabel5.setFont(FontsLoader.getStaticLabelFont());
        jLabel5.setText("SIN");

        jLabel6.setFont(FontsLoader.getStaticLabelFont());
        jLabel6.setText("Phone");

        txtFirstname.setFont(FontsLoader.getTextFieldFont());

        txtLastname.setFont(FontsLoader.getTextFieldFont());
        txtLastname.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtLastnameActionPerformed(evt);
            }
        });

        txtEmail.setFont(FontsLoader.getTextFieldFont());

        txtAddress.setFont(FontsLoader.getTextFieldFont());

        txtSIN.setColumns(9);
        txtSIN.setFont(FontsLoader.getTextFieldFont());

        javax.swing.GroupLayout pnlPersonalLayout = new javax.swing.GroupLayout(pnlPersonal);
        pnlPersonal.setLayout(pnlPersonalLayout);
        pnlPersonalLayout.setHorizontalGroup(
            pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlPersonalLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel6, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtFirstname)
                    .addComponent(txtLastname)
                    .addComponent(txtEmail)
                    .addComponent(txtAddress)
                    .addGroup(pnlPersonalLayout.createSequentialGroup()
                        .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(pnlPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtSIN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 125, Short.MAX_VALUE)))
                .addContainerGap())
        );
        pnlPersonalLayout.setVerticalGroup(
            pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlPersonalLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtFirstname)
                    .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtLastname)
                    .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(txtEmail))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(pnlPhone, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtAddress))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlPersonalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtSIN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(30, 30, 30))
        );

        pnlUserAccount.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "User Account Setting", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, FontsLoader.getTitleBorderFont()));

        jLabel7.setFont(FontsLoader.getStaticLabelFont());
        jLabel7.setText("Username");

        jLabel8.setFont(FontsLoader.getStaticLabelFont());
        jLabel8.setText("Password:");

        jLabel9.setFont(FontsLoader.getStaticLabelFont());
        jLabel9.setText("Re-enter Password:");

        txtUsername.setFont(FontsLoader.getTextFieldFont());

        txtPass1.setFont(FontsLoader.getTextFieldFont());

        txtPass2.setFont(FontsLoader.getTextFieldFont());

        listGroups.setBackground(this.getBackground());
        listGroups.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        listGroups.setFont(FontsLoader.getDynamicLabelFont());
        jScrollPane1.setViewportView(listGroups);

        jLabel10.setFont(FontsLoader.getStaticLabelFont());
        jLabel10.setText("User Groups:");

        cboQuestion.setFont(FontsLoader.getComboBoxFont());
        cboQuestion.setModel(cboModel);

        jLabel11.setFont(FontsLoader.getStaticLabelFont());
        jLabel11.setText("Password Answer:");

        txtAnswer.setFont(FontsLoader.getTextFieldFont());

        javax.swing.GroupLayout pnlUserAccountLayout = new javax.swing.GroupLayout(pnlUserAccount);
        pnlUserAccount.setLayout(pnlUserAccountLayout);
        pnlUserAccountLayout.setHorizontalGroup(
            pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlUserAccountLayout.createSequentialGroup()
                .addContainerGap(58, Short.MAX_VALUE)
                .addComponent(jLabel7)
                .addGap(223, 223, 223))
            .addGroup(pnlUserAccountLayout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addComponent(cboQuestion, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(10, 10, 10))
            .addGroup(pnlUserAccountLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel11)
                    .addComponent(jLabel9)
                    .addComponent(jLabel8)
                    .addComponent(jLabel10))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtUsername)
                    .addComponent(txtPass1)
                    .addComponent(txtPass2)
                    .addComponent(txtAnswer))
                .addContainerGap())
        );
        pnlUserAccountLayout.setVerticalGroup(
            pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlUserAccountLayout.createSequentialGroup()
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(txtUsername, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(txtPass1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(txtPass2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(cboQuestion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(txtAnswer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlUserAccountLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel10)))
        );

        btnAddStaff.setFont(FontsLoader.getButtonFont());
        btnAddStaff.setText("Add Staff");
        btnAddStaff.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddStaffActionPerformed(evt);
            }
        });

        jButton2.setFont(FontsLoader.getButtonFont());
        jButton2.setText("Cancel");

        lblErrorMsg.setFont(new java.awt.Font("Segoe UI", 1, 10)); // NOI18N
        lblErrorMsg.setForeground(new java.awt.Color(255, 51, 51));

        javax.swing.GroupLayout centreLayout = new javax.swing.GroupLayout(centre);
        centre.setLayout(centreLayout);
        centreLayout.setHorizontalGroup(
            centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(centreLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pnlPersonal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(lblErrorMsg, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(centreLayout.createSequentialGroup()
                        .addComponent(btnAddStaff)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton2))
                    .addComponent(pnlUserAccount, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );
        centreLayout.setVerticalGroup(
            centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(centreLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(centreLayout.createSequentialGroup()
                        .addComponent(pnlPersonal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblErrorMsg, javax.swing.GroupLayout.PREFERRED_SIZE, 16, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(pnlUserAccount, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(centreLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton2)
                    .addComponent(btnAddStaff))
                .addContainerGap())
        );

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.ipadx = 125;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(13, 39, 23, 0);
        add(centre, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

   private void txtLastnameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtLastnameActionPerformed
      // TODO add your handling code here:
   }//GEN-LAST:event_txtLastnameActionPerformed

   private void btnAddStaffActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddStaffActionPerformed
      User user = saveFields();
      
      if (user != null)
      {
         user.setUserGroups(getSelectedUserGroup());
         try {
            UserManager.createUser(user);
            PopupMessage.createInfo("New User Created!\n"+ user + "\n", "ta-da~~");
            TabManager.closeTab(this.getName());
         } catch (BadFieldException ex) {
            lblErrorMsg.setText(ex.getMessage());
            return;
         } catch (DatabaseException ex) {
            PopupMessage.createErrorPopUp(ex.getMessage(), null);
            return;
         }
      }
      
   }//GEN-LAST:event_btnAddStaffActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAddStaff;
    private javax.swing.JComboBox cboQuestion;
    private javax.swing.JPanel centre;
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblErrorMsg;
    private de.javasoft.swing.JYCheckBoxList listGroups;
    private javax.swing.JPanel pnlPersonal;
    private ca.robokids.robooffice.desktop.tabs.components.PhoneNumberPanel pnlPhone;
    private javax.swing.JPanel pnlUserAccount;
    private javax.swing.JTextField txtAddress;
    private javax.swing.JTextField txtAnswer;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtFirstname;
    private javax.swing.JTextField txtLastname;
    private javax.swing.JPasswordField txtPass1;
    private javax.swing.JPasswordField txtPass2;
    private ca.robokids.robooffice.desktop.tabs.components.IntegerNumberJTextField txtSIN;
    private javax.swing.JTextField txtUsername;
    // End of variables declaration//GEN-END:variables

   @Override
   public void initialize() {
      this.txtAddress.setText("");
      this.txtFirstname.setText("");
      this.txtLastname.setText("");
      this.txtEmail.setText("");
      this.txtPass1.setText("");
      this.txtPass2.setText("");
      this.txtUsername.setText("");
      this.pnlPhone.reset();
      this.txtSIN.setText("");
      this.txtAnswer.setText("");


   }

   @Override
   public void refresh() {

      try {
         //load usergroup information
         model.clear();
         groups = UserManager.loadAllUserGroup();
         for (UserGroup g : groups) {
            model.addElement(g);
         }
         listGroups.setModel(model);
         checkboxModel = new CheckBoxSelectionModel(listGroups, false);
         this.listGroups.setCheckBoxSelectionModel(checkboxModel);
         checkboxModel.clearSelection();
         listGroups.setCheckBoxSelectableByItemClick(true);
      } catch (DatabaseException ex) {
         System.out.println(ex.getMessage());
      }

      try {
         cboModel.removeAllElements();
         List<PasswordQuestion> questions = UserManager.loadAllQuestion();
         for (PasswordQuestion q : questions) {
            cboModel.addElement(q);
         }

      } catch (DatabaseException ex) {
         System.out.println(ex.getMessage());
      }


   }

   @Override
   public void setFocus() {
      this.txtFirstname.requestFocus();
   }

   private User saveFields() {
      if (txtPass1.getText().equals(""))
      {
         lblErrorMsg.setText("Password fields cannot be empty.");
         return null;
      }
      if (txtPass2.getText().equals("")){
         lblErrorMsg.setText("Password fields cannot be empty.");
         return null;
      }
         
      if (!txtPass1.getText().equals(txtPass2.getText()))
      {
         lblErrorMsg.setText("New Passwords don't match.");
         return null;
      }
      User temp = new User();
      temp.setFirstName(txtFirstname.getText());
      temp.setLastName(txtLastname.getText());
      temp.setEmail(txtEmail.getText());
      temp.setAddress(txtAddress.getText());
      temp.setPhone(pnlPhone.getPhone());
      temp.setUserName(txtUsername.getText());
      temp.setSIN(txtSIN.getText());
      temp.setPassword(String.valueOf(txtPass1.getPassword()));
      temp.setPasswordAnswer(txtAnswer.getText());
      temp.setPasswordQuestion(cboModel.getElementAt(cboQuestion.getSelectedIndex()));
      return temp;
   }
   
   private List<UserGroup> getSelectedUserGroup() {
      int selected[] = listGroups.getSelectedCheckBoxIndices();
      List<UserGroup> newGroups = new ArrayList();
      for (int i = 0; i < selected.length; i++)
      {
         newGroups.add(model.getElementAt(selected[i]));
      }
      return newGroups;
      
   }
}
